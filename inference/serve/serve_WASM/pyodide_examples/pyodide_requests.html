<!doctype html>
<html>
  <head>
      <script src="https://cdn.jsdelivr.net/pyodide/v0.25.0/full/pyodide.js"></script>
  </head>
  <body>
    <input id="url" value="https://raw.githubusercontent.com/statsbomb/open-data/master/data/lineups/15946.json" />
    <button onclick="evaluatePython()">Run</button>

    <div id="output"></div>
    <script type="text/javascript">
        const url = document.getElementById("url");
    
      async function main(){
        let pyodide = await loadPyodide();
        return pyodide;
      }
      let pyodideReadyPromise = main();

      async function evaluatePython() {
        let pyodide = await pyodideReadyPromise;
        try {
            await pyodide.loadPackage("micropip");
            await pyodide.loadPackage("pyodide-http")
            await pyodide.loadPackage("requests");
            let python_output = pyodide.runPythonAsync("from pyodide.http import pyfetch \nurl = '" + url.value + "' \nres = await pyfetch(url) \ndata = await res.bytes() \ndata").then()
            python_output.then(function(result) {
                console.log(result);
                var output_div = document.getElementById('output');
                output_div.innerHTML = result;
            });
            
        } catch (err) {
            console.log(err);
        }
      }

    </script>
  </body>
</html>